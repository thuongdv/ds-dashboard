<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Cloud Architecture: AWS Fargate & HAProxy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        /* Custom Font and Smooth Scrolling */
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        
        /* Chart Container Guidelines */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 350px;
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Material Design Card Hover Effects */
        .material-card {
            transition: all 0.3s ease;
        }
        .material-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Gradient Backgrounds */
        .bg-gradient-tech {
            background: linear-gradient(135deg, #4F46E5 0%, #06B6D4 100%);
        }
    </style>
    <!-- 
    NO SVG USED. NO MERMAID JS USED.
    Palette: Vibrant Tech (Indigo #4F46E5, Cyan #06B6D4, Amber #F59E0B)
    Source Material: AWS Fargate/HAProxy Infrastructure Conversation
    Plan:
    1. Header: Title & Context
    2. Architecture Overview: Structural breakdown
    3. Traffic Analysis: Doughnut & Radar Charts
    4. The Sidecar Pattern: Stacked Bar Chart
    5. Traffic Flow: CSS Process Diagram
    6. Footer
    -->
</head>
<body class="bg-slate-50 text-slate-800 antialiased">

    <!-- Navigation / Progress Indicator -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md shadow-sm border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex-shrink-0 flex items-center gap-2">
                    <span class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-cyan-500">
                        CloudViz
                    </span>
                </div>
                <div class="hidden md:flex space-x-8 text-sm font-medium text-slate-500">
                    <a href="#overview" class="hover:text-indigo-600 transition-colors">Overview</a>
                    <a href="#metrics" class="hover:text-indigo-600 transition-colors">Key Metrics</a>
                    <a href="#sidecar" class="hover:text-indigo-600 transition-colors">Sidecar Pattern</a>
                    <a href="#flow" class="hover:text-indigo-600 transition-colors">Traffic Flow</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative bg-white overflow-hidden">
        <div class="max-w-7xl mx-auto">
            <div class="relative z-10 pb-8 bg-white sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32 pt-20 px-4 sm:px-6 lg:px-8">
                <main class="mt-10 mx-auto max-w-7xl sm:mt-12 md:mt-16 lg:mt-20 xl:mt-28">
                    <div class="sm:text-center lg:text-left">
                        <h1 class="text-4xl tracking-tight font-extrabold text-slate-900 sm:text-5xl md:text-6xl">
                            <span class="block xl:inline">Next-Gen Security</span>
                            <span class="block text-indigo-600">AWS Fargate & HAProxy</span>
                        </h1>
                        <p class="mt-3 text-base text-slate-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0">
                            A deep dive into a serverless architecture that leverages the "Sidecar" pattern for maximum security and performance. Moving from manual EC2 management to automated, self-healing containers.
                        </p>
                        <div class="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start gap-4">
                            <div class="rounded-md shadow">
                                <span class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 md:py-4 md:text-lg">
                                    Zero Trust
                                </span>
                            </div>
                            <div class="rounded-md shadow">
                                <span class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 md:py-4 md:text-lg">
                                    High Availability
                                </span>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
        <div class="lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2 bg-indigo-50 flex items-center justify-center">
            <!-- Conceptual Graphic via CSS/HTML -->
            <div class="grid grid-cols-2 gap-4 p-8 opacity-90 transform rotate-3 scale-90">
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-indigo-500">
                    <div class="text-indigo-600 font-bold text-xl">ALB</div>
                    <div class="text-sm text-slate-400">Ingress Controller</div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-cyan-500 mt-8">
                    <div class="text-cyan-600 font-bold text-xl">Fargate</div>
                    <div class="text-sm text-slate-400">Serverless Compute</div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-amber-500">
                    <div class="text-amber-600 font-bold text-xl">HAProxy</div>
                    <div class="text-sm text-slate-400">Sidecar Proxy</div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-slate-800 mt-8">
                    <div class="text-slate-800 font-bold text-xl">Nginx</div>
                    <div class="text-sm text-slate-400">Application Core</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Section 1: Architecture Overview -->
    <section id="overview" class="py-16 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-extrabold text-slate-900">Architecture Components</h2>
                <p class="mt-4 text-xl text-slate-500">Understanding the building blocks of a resilient cloud system.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Card 1 -->
                <div class="bg-white rounded-lg shadow-md p-6 material-card border-t-4 border-indigo-500">
                    <h3 class="text-lg font-bold text-slate-900 mb-2">Application Load Balancer (ALB)</h3>
                    <p class="text-slate-600 text-sm mb-4">
                        The single entry point. Handles SSL termination (HTTPS) and automatically redirects insecure HTTP traffic. It distributes traffic to dynamic IP addresses.
                    </p>
                    <div class="flex items-center justify-between text-xs font-semibold text-indigo-600 bg-indigo-50 p-2 rounded">
                        <span>Port 443</span>
                        <span>&rarr;</span>
                        <span>Port 8080</span>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="bg-white rounded-lg shadow-md p-6 material-card border-t-4 border-cyan-500">
                    <h3 class="text-lg font-bold text-slate-900 mb-2">AWS Fargate</h3>
                    <p class="text-slate-600 text-sm mb-4">
                        A serverless compute engine. We no longer manage EC2 instances or OS patches. Fargate launches ephemeral "Tasks" (pods) that scale automatically.
                    </p>
                    <div class="flex items-center justify-between text-xs font-semibold text-cyan-600 bg-cyan-50 p-2 rounded">
                        <span>Target Type</span>
                        <span>=</span>
                        <span>IP Address</span>
                    </div>
                </div>

                <!-- Card 3 -->
                <div class="bg-white rounded-lg shadow-md p-6 material-card border-t-4 border-amber-500">
                    <h3 class="text-lg font-bold text-slate-900 mb-2">Security Groups (Firewalls)</h3>
                    <p class="text-slate-600 text-sm mb-4">
                        Strict isolation rules. The ALB is open to the world, but the Fargate tasks are invisible, accepting traffic <em>only</em> from the ALB's security group.
                    </p>
                    <div class="flex items-center justify-between text-xs font-semibold text-amber-600 bg-amber-50 p-2 rounded">
                        <span>Inbound</span>
                        <span>:</span>
                        <span>ALB Only</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Metrics & Analysis -->
    <section id="metrics" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-extrabold text-slate-900">Performance & Security Analysis</h2>
                <p class="mt-4 text-xl text-slate-500">Why this architecture outperforms traditional legacy setups.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- Chart 1: Legacy vs Modern Radar -->
                <div class="flex flex-col">
                    <h3 class="text-xl font-bold text-slate-800 mb-4 pl-4 border-l-4 border-indigo-500">Legacy vs. Fargate Comparison</h3>
                    <p class="text-slate-600 mb-6">
                        Comparing a traditional EC2-based setup against our new Fargate Sidecar implementation. Note the massive gains in Maintenance and Security.
                    </p>
                    <div class="chart-container bg-slate-50 rounded-xl p-4 shadow-inner">
                        <canvas id="radarChart"></canvas>
                    </div>
                </div>

                <!-- Chart 2: Traffic Distribution -->
                <div class="flex flex-col">
                    <h3 class="text-xl font-bold text-slate-800 mb-4 pl-4 border-l-4 border-cyan-500">Traffic Handling Logic</h3>
                    <p class="text-slate-600 mb-6">
                        The ALB ensures 100% encryption. While we accept HTTP connections, they are immediately converted, ensuring zero unencrypted data reaches the app.
                    </p>
                    <div class="chart-container bg-slate-50 rounded-xl p-4 shadow-inner">
                        <canvas id="trafficChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 3: The Sidecar Pattern -->
    <section id="sidecar" class="py-16 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div>
                    <h2 class="text-3xl font-extrabold text-slate-900 mb-6">The "Sidecar" Pattern</h2>
                    <p class="text-lg text-slate-600 mb-6">
                        In this architecture, HAProxy and Nginx share the same "home" (Task). They communicate over <code>localhost</code>, eliminating network latency between the proxy and the app.
                    </p>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold text-sm">1</div>
                            <p class="ml-4 text-slate-600"><strong>Single Unit:</strong> Both containers scale up and down together.</p>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold text-sm">2</div>
                            <p class="ml-4 text-slate-600"><strong>Localhost Speed:</strong> No external network calls between HAProxy and Nginx.</p>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-amber-500 flex items-center justify-center text-white font-bold text-sm">3</div>
                            <p class="ml-4 text-slate-600"><strong>Simplified Networking:</strong> Only one port (8080) needs to be exposed to the ALB.</p>
                        </li>
                    </ul>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-bold text-slate-800 mb-4">Task Resource Composition</h3>
                    <div class="chart-container">
                        <canvas id="sidecarChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 4: Traffic Flow Visual -->
    <section id="flow" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-extrabold text-slate-900">Visualizing the Traffic Journey</h2>
                <p class="mt-4 text-xl text-slate-500">From the user's browser to the application core.</p>
            </div>

            <!-- CSS Flow Diagram -->
            <div class="relative">
                <!-- Connecting Line (Desktop) -->
                <div class="hidden md:block absolute top-1/2 left-0 w-full h-2 bg-slate-100 -z-10 transform -translate-y-1/2"></div>

                <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center">
                    <!-- Step 1 -->
                    <div class="bg-white p-6 rounded-lg shadow-lg border-2 border-slate-100 relative material-card">
                        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold">1</div>
                        <div class="text-4xl mb-4">üë§</div>
                        <h4 class="font-bold text-lg">User</h4>
                        <p class="text-sm text-slate-500 mt-2">Initiates Request via HTTPS</p>
                        <div class="mt-4 inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Encrypted</div>
                    </div>

                    <!-- Step 2 -->
                    <div class="bg-indigo-50 p-6 rounded-lg shadow-lg border-2 border-indigo-100 relative material-card">
                        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold">2</div>
                        <div class="text-4xl mb-4">üõ°Ô∏è</div>
                        <h4 class="font-bold text-lg text-indigo-900">ALB</h4>
                        <p class="text-sm text-indigo-700 mt-2">SSL Termination & Routing</p>
                        <div class="mt-4 inline-block bg-white text-indigo-600 text-xs px-2 py-1 rounded border border-indigo-200">Decrypts Data</div>
                    </div>

                    <!-- Step 3 -->
                    <div class="bg-cyan-50 p-6 rounded-lg shadow-lg border-2 border-cyan-100 relative material-card">
                        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-cyan-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold">3</div>
                        <div class="text-4xl mb-4">üì¶</div>
                        <h4 class="font-bold text-lg text-cyan-900">Fargate Task</h4>
                        <p class="text-sm text-cyan-700 mt-2">HAProxy receives on :8080</p>
                        <div class="mt-4 inline-block bg-white text-cyan-600 text-xs px-2 py-1 rounded border border-cyan-200">Internal Net</div>
                    </div>

                    <!-- Step 4 -->
                    <div class="bg-slate-50 p-6 rounded-lg shadow-lg border-2 border-slate-200 relative material-card">
                        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-amber-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold">4</div>
                        <div class="text-4xl mb-4">‚öôÔ∏è</div>
                        <h4 class="font-bold text-lg text-slate-800">Nginx Core</h4>
                        <p class="text-sm text-slate-500 mt-2">Processes request on :80</p>
                        <div class="mt-4 inline-block bg-amber-100 text-amber-800 text-xs px-2 py-1 rounded">Response Gen</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-2xl font-bold text-indigo-400">Secure Cloud Architecture</h2>
            <p class="mt-4 text-slate-400 max-w-2xl mx-auto">
                Built with Terraform/Pulumi, AWS Fargate, and Open Source Tools. Designed for scalability, security, and developer peace of mind.
            </p>
            <div class="mt-8 border-t border-slate-800 pt-8 text-sm text-slate-500">
                &copy; 2026 CloudViz Gen. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Chart.js Scripts -->
    <script>
        // Common Chart Configuration
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#64748b';
        Chart.defaults.plugins.tooltip.backgroundColor = '#1e293b';
        Chart.defaults.plugins.tooltip.padding = 12;
        Chart.defaults.plugins.tooltip.cornerRadius = 8;
        
        // Tooltip Callback for Multiline Labels (Requirement)
        const tooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // Label Wrapping Utility (Requirement)
        function wrapLabel(str, maxLen = 16) {
            if (str.length <= maxLen) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= maxLen) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // 1. Radar Chart: Legacy vs Fargate
        const ctxRadar = document.getElementById('radarChart').getContext('2d');
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: [
                    wrapLabel('Security Isolation'), 
                    wrapLabel('Auto-Scaling Speed'), 
                    wrapLabel('Maintenance Ease'), 
                    wrapLabel('Cost Efficiency'), 
                    wrapLabel('Setup Simplicity')
                ],
                datasets: [{
                    label: 'AWS Fargate',
                    data: [95, 90, 95, 80, 70],
                    fill: true,
                    backgroundColor: 'rgba(79, 70, 229, 0.2)', // Indigo
                    borderColor: '#4F46E5',
                    pointBackgroundColor: '#4F46E5',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#4F46E5'
                }, {
                    label: 'Legacy EC2',
                    data: [60, 50, 40, 65, 50],
                    fill: true,
                    backgroundColor: 'rgba(148, 163, 184, 0.2)', // Slate
                    borderColor: '#94a3b8',
                    pointBackgroundColor: '#94a3b8',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#94a3b8'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                elements: { line: { borderWidth: 3 } },
                scales: {
                    r: {
                        angleLines: { color: '#e2e8f0' },
                        grid: { color: '#e2e8f0' },
                        pointLabels: { font: { size: 12, weight: 600 } },
                        suggestedMin: 0,
                        suggestedMax: 100
                    }
                },
                plugins: {
                    legend: { position: 'top' },
                    tooltip: tooltipConfig
                }
            }
        });

        // 2. Doughnut Chart: Traffic Types
        const ctxTraffic = document.getElementById('trafficChart').getContext('2d');
        new Chart(ctxTraffic, {
            type: 'doughnut',
            data: {
                labels: [
                    wrapLabel('Secure HTTPS (Forwarded)'), 
                    wrapLabel('Insecure HTTP (Redirected)')
                ],
                datasets: [{
                    data: [85, 15],
                    backgroundColor: ['#06B6D4', '#F59E0B'], // Cyan, Amber
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: tooltipConfig
                }
            }
        });

        // 3. Stacked Bar Chart: Sidecar Composition
        const ctxSidecar = document.getElementById('sidecarChart').getContext('2d');
        new Chart(ctxSidecar, {
            type: 'bar',
            data: {
                labels: [wrapLabel('Fargate Task Unit')],
                datasets: [{
                    label: 'HAProxy (Sidecar)',
                    data: [20],
                    backgroundColor: '#F59E0B', // Amber
                    barPercentage: 0.5
                }, {
                    label: 'Nginx (App)',
                    data: [80],
                    backgroundColor: '#4F46E5', // Indigo
                    barPercentage: 0.5
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { stacked: true, max: 100, grid: { display: false } },
                    y: { stacked: true, grid: { display: false }, display: false }
                },
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: tooltipConfig,
                    title: {
                        display: true,
                        text: 'Resource & Logic Distribution'
                    }
                }
            }
        });
    </script>
</body>
</html>